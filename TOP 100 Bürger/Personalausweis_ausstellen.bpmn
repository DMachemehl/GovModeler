<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions
  xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  targetNamespace="http://example.com/bpmn/personalausweis"
  exporter="GitHub-Copilot-GovModeler"
  exporterVersion="2.0" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.4.0">

  <!-- Kollaboration: Personalausweis ausstellen (Happy Path) -->
  <bpmn:collaboration id="Collab_Personalausweis_Ausstellen" name="Personalausweis ausstellen">
    <bpmn:participant id="Participant_Buerger" name="Buerger" processRef="Process_Buerger" />
    <bpmn:participant id="Participant_IT" name="IT" processRef="Process_IT" />
    <bpmn:participant id="Participant_Behoerde" name="Behoerde" processRef="Process_Behoerde" />

    <!-- Message Flows (nur Happy Path) -->
    <bpmn:messageFlow id="MsgFlow_Antrag_Uebermittlung" name="Antrag" sourceRef="Task_Antrag_einreichen" targetRef="StartEvent_IT" />
    <bpmn:messageFlow id="MsgFlow_Gebuehr_Bestaetigung" name="Zahlungsdaten" sourceRef="Task_Gebuehr_bezahlen" targetRef="Task_Daten_erfassen" />
    <bpmn:messageFlow id="MsgFlow_Vollstaendigkeit_OK" name="Vollstaendig" sourceRef="Task_Vollstaendigkeit_pruefen" targetRef="StartEvent_Behoerde" />
    <bpmn:messageFlow id="MsgFlow_Datensatz" name="Personalisierungsdaten" sourceRef="Task_Ausweisdaten_generieren" targetRef="Task_Personalausweis_personalisieren" />
    <bpmn:messageFlow id="MsgFlow_Abholinfo" name="Abholinfo" sourceRef="Task_Ausweis_zur_Ausgabe_vorbereiten" targetRef="Task_Ausweis_abholen" />
    <bpmn:messageFlow id="MsgFlow_Aushaendigung" name="Empfangsbestaetigung" sourceRef="Task_Ausweis_aushaendigen" targetRef="EndEvent_Buerger" />
  </bpmn:collaboration>

  <!-- Prozess: Buerger -->
  <bpmn:process id="Process_Buerger" name="Personalausweis_Buerger" isExecutable="true">
    <bpmn:startEvent id="StartEvent_Buerger" name="Vorgang gestartet">
      <bpmn:outgoing>Flow_Buerger_Start_Antrag</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:userTask id="Task_Antrag_einreichen" name="Antrag einreichen">
      <bpmn:incoming>Flow_Buerger_Start_Antrag</bpmn:incoming>
      <bpmn:outgoing>Flow_Antrag_Gebuehr</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Task_Gebuehr_bezahlen" name="Gebuehr bezahlen">
      <bpmn:incoming>Flow_Antrag_Gebuehr</bpmn:incoming>
      <bpmn:outgoing>Flow_Gebuehr_Warten_Abholinfo</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Task_Ausweis_abholen" name="Ausweis abholen">
      <bpmn:incoming>Flow_Gebuehr_Warten_Abholinfo</bpmn:incoming>
      <bpmn:outgoing>Flow_Abholen_Ende</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:endEvent id="EndEvent_Buerger" name="Ausweis erhalten">
      <bpmn:incoming>Flow_Abholen_Ende</bpmn:incoming>
    </bpmn:endEvent>
    <!-- Sequence Flows Buerger -->
    <bpmn:sequenceFlow id="Flow_Buerger_Start_Antrag" sourceRef="StartEvent_Buerger" targetRef="Task_Antrag_einreichen" />
    <bpmn:sequenceFlow id="Flow_Antrag_Gebuehr" sourceRef="Task_Antrag_einreichen" targetRef="Task_Gebuehr_bezahlen" />
    <bpmn:sequenceFlow id="Flow_Gebuehr_Warten_Abholinfo" sourceRef="Task_Gebuehr_bezahlen" targetRef="Task_Ausweis_abholen" />
    <bpmn:sequenceFlow id="Flow_Abholen_Ende" sourceRef="Task_Ausweis_abholen" targetRef="EndEvent_Buerger" />
  </bpmn:process>

  <!-- Prozess: IT -->
  <bpmn:process id="Process_IT" name="Personalausweis_IT" isExecutable="true">
    <bpmn:startEvent id="StartEvent_IT" name="Antrag eingegangen">
      <bpmn:outgoing>Flow_IT_Start_Daten</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Task_Daten_erfassen" name="Daten erfassen">
      <bpmn:incoming>Flow_IT_Start_Daten</bpmn:incoming>
      <bpmn:outgoing>Flow_Daten_Vollstaendigkeit</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_Vollstaendigkeit_pruefen" name="Vollstaendigkeit pruefen">
      <bpmn:incoming>Flow_Daten_Vollstaendigkeit</bpmn:incoming>
      <bpmn:outgoing>Flow_Vollstaendigkeit_Ausweisdaten</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_Ausweisdaten_generieren" name="Ausweisdaten generieren">
      <bpmn:incoming>Flow_Vollstaendigkeit_Ausweisdaten</bpmn:incoming>
      <bpmn:outgoing>Flow_Ausweisdaten_Ende_IT</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="EndEvent_IT" name="Datensatz bereitgestellt">
      <bpmn:incoming>Flow_Ausweisdaten_Ende_IT</bpmn:incoming>
    </bpmn:endEvent>
    <!-- Sequence Flows IT -->
    <bpmn:sequenceFlow id="Flow_IT_Start_Daten" sourceRef="StartEvent_IT" targetRef="Task_Daten_erfassen" />
    <bpmn:sequenceFlow id="Flow_Daten_Vollstaendigkeit" sourceRef="Task_Daten_erfassen" targetRef="Task_Vollstaendigkeit_pruefen" />
    <bpmn:sequenceFlow id="Flow_Vollstaendigkeit_Ausweisdaten" sourceRef="Task_Vollstaendigkeit_pruefen" targetRef="Task_Ausweisdaten_generieren" />
    <bpmn:sequenceFlow id="Flow_Ausweisdaten_Ende_IT" sourceRef="Task_Ausweisdaten_generieren" targetRef="EndEvent_IT" />
  </bpmn:process>

  <!-- Prozess: Behoerde -->
  <bpmn:process id="Process_Behoerde" name="Personalausweis_Behoerde" isExecutable="true">
    <bpmn:startEvent id="StartEvent_Behoerde" name="Vollstaendiger Antrag eingegangen">
      <bpmn:outgoing>Flow_Behoerde_Start_Identitaet</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:userTask id="Task_Identitaet_bestaetigen" name="Identitaet bestaetigen">
      <bpmn:incoming>Flow_Behoerde_Start_Identitaet</bpmn:incoming>
      <bpmn:outgoing>Flow_Identitaet_Personalisieren</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Task_Personalausweis_personalisieren" name="Personalausweis personalisieren">
      <bpmn:incoming>Flow_Identitaet_Personalisieren</bpmn:incoming>
      <bpmn:outgoing>Flow_Personalisieren_Vorbereiten</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Task_Ausweis_zur_Ausgabe_vorbereiten" name="Ausweis zur Ausgabe vorbereiten">
      <bpmn:incoming>Flow_Personalisieren_Vorbereiten</bpmn:incoming>
      <bpmn:outgoing>Flow_Vorbereiten_Aushaendigen</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Task_Ausweis_aushaendigen" name="Ausweis aushaendigen">
      <bpmn:incoming>Flow_Vorbereiten_Aushaendigen</bpmn:incoming>
      <bpmn:outgoing>Flow_Aushaendigen_Ende</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:endEvent id="EndEvent_Behoerde" name="Personalausweis ausgestellt">
      <bpmn:incoming>Flow_Aushaendigen_Ende</bpmn:incoming>
    </bpmn:endEvent>
    <!-- Sequence Flows Behoerde -->
    <bpmn:sequenceFlow id="Flow_Behoerde_Start_Identitaet" sourceRef="StartEvent_Behoerde" targetRef="Task_Identitaet_bestaetigen" />
    <bpmn:sequenceFlow id="Flow_Identitaet_Personalisieren" sourceRef="Task_Identitaet_bestaetigen" targetRef="Task_Personalausweis_personalisieren" />
    <bpmn:sequenceFlow id="Flow_Personalisieren_Vorbereiten" sourceRef="Task_Personalausweis_personalisieren" targetRef="Task_Ausweis_zur_Ausgabe_vorbereiten" />
    <bpmn:sequenceFlow id="Flow_Vorbereiten_Aushaendigen" sourceRef="Task_Ausweis_zur_Ausgabe_vorbereiten" targetRef="Task_Ausweis_aushaendigen" />
    <bpmn:sequenceFlow id="Flow_Aushaendigen_Ende" sourceRef="Task_Ausweis_aushaendigen" targetRef="EndEvent_Behoerde" />
  </bpmn:process>

  <!-- Messages -->
  <bpmn:message id="Message_Antrag" name="Antrag" />
  <bpmn:message id="Message_Zahlung" name="Zahlungsdaten" />
  <bpmn:message id="Message_Vollstaendig" name="Vollstaendig" />
  <bpmn:message id="Message_Datensatz" name="Personalisierungsdaten" />
  <bpmn:message id="Message_Abholinfo" name="Abholinfo" />
  <bpmn:message id="Message_Empfang" name="Empfangsbestaetigung" />

  <!-- DI Diagram -->
  <bpmndi:BPMNDiagram id="BPMNDiagram_Personalausweis_Ausstellen">
    <bpmndi:BPMNPlane id="BPMNPlane_Personalausweis_Ausstellen" bpmnElement="Collab_Personalausweis_Ausstellen">

      <!-- Pool Buerger -->
      <bpmndi:BPMNShape id="Participant_Buerger_di" bpmnElement="Participant_Buerger" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="1200" height="300" />
      </bpmndi:BPMNShape>
      <!-- Buerger Elemente (Y-Koordinaten laut Guidelines: Tasks 160, Events 182) -->
      <bpmndi:BPMNShape id="StartEvent_Buerger_di" bpmnElement="StartEvent_Buerger">
        <dc:Bounds x="222" y="182" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Antrag_einreichen_di" bpmnElement="Task_Antrag_einreichen">
        <dc:Bounds x="310" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Gebuehr_bezahlen_di" bpmnElement="Task_Gebuehr_bezahlen">
        <dc:Bounds x="470" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Ausweis_abholen_di" bpmnElement="Task_Ausweis_abholen">
        <dc:Bounds x="630" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_Buerger_di" bpmnElement="EndEvent_Buerger">
        <dc:Bounds x="790" y="182" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- Pool IT -->
      <bpmndi:BPMNShape id="Participant_IT_di" bpmnElement="Participant_IT" isHorizontal="true">
        <dc:Bounds x="160" y="370" width="1200" height="300" />
      </bpmndi:BPMNShape>
      <!-- IT Elemente (Tasks 455, Events 477) -->
      <bpmndi:BPMNShape id="StartEvent_IT_di" bpmnElement="StartEvent_IT">
        <dc:Bounds x="222" y="477" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Daten_erfassen_di" bpmnElement="Task_Daten_erfassen">
        <dc:Bounds x="310" y="455" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Vollstaendigkeit_pruefen_di" bpmnElement="Task_Vollstaendigkeit_pruefen">
        <dc:Bounds x="470" y="455" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Ausweisdaten_generieren_di" bpmnElement="Task_Ausweisdaten_generieren">
        <dc:Bounds x="630" y="455" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_IT_di" bpmnElement="EndEvent_IT">
        <dc:Bounds x="790" y="477" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- Pool Behoerde -->
      <bpmndi:BPMNShape id="Participant_Behoerde_di" bpmnElement="Participant_Behoerde" isHorizontal="true">
        <dc:Bounds x="160" y="660" width="1200" height="300" />
      </bpmndi:BPMNShape>
      <!-- Behoerde Elemente (Tasks 760, Events 782) -->
      <bpmndi:BPMNShape id="StartEvent_Behoerde_di" bpmnElement="StartEvent_Behoerde">
        <dc:Bounds x="222" y="782" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Identitaet_bestaetigen_di" bpmnElement="Task_Identitaet_bestaetigen">
        <dc:Bounds x="310" y="760" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Personalausweis_personalisieren_di" bpmnElement="Task_Personalausweis_personalisieren">
        <dc:Bounds x="470" y="760" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Ausweis_zur_Ausgabe_vorbereiten_di" bpmnElement="Task_Ausweis_zur_Ausgabe_vorbereiten">
        <dc:Bounds x="630" y="760" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Ausweis_aushaendigen_di" bpmnElement="Task_Ausweis_aushaendigen">
        <dc:Bounds x="790" y="760" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_Behoerde_di" bpmnElement="EndEvent_Behoerde">
        <dc:Bounds x="950" y="782" width="36" height="36" />
      </bpmndi:BPMNShape>

      <!-- Sequence Flows DI (nur gerade horizontale Linien) -->
      <!-- Buerger -->
      <bpmndi:BPMNEdge id="Flow_Buerger_Start_Antrag_di" bpmnElement="Flow_Buerger_Start_Antrag">
        <di:waypoint x="258" y="200" />
        <di:waypoint x="310" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Antrag_Gebuehr_di" bpmnElement="Flow_Antrag_Gebuehr">
        <di:waypoint x="410" y="200" />
        <di:waypoint x="470" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Gebuehr_Warten_Abholinfo_di" bpmnElement="Flow_Gebuehr_Warten_Abholinfo">
        <di:waypoint x="570" y="200" />
        <di:waypoint x="630" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Abholen_Ende_di" bpmnElement="Flow_Abholen_Ende">
        <di:waypoint x="730" y="200" />
        <di:waypoint x="790" y="200" />
      </bpmndi:BPMNEdge>

      <!-- IT -->
      <bpmndi:BPMNEdge id="Flow_IT_Start_Daten_di" bpmnElement="Flow_IT_Start_Daten">
        <di:waypoint x="258" y="495" />
        <di:waypoint x="310" y="495" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Daten_Vollstaendigkeit_di" bpmnElement="Flow_Daten_Vollstaendigkeit">
        <di:waypoint x="410" y="495" />
        <di:waypoint x="470" y="495" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Vollstaendigkeit_Ausweisdaten_di" bpmnElement="Flow_Vollstaendigkeit_Ausweisdaten">
        <di:waypoint x="570" y="495" />
        <di:waypoint x="630" y="495" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Ausweisdaten_Ende_IT_di" bpmnElement="Flow_Ausweisdaten_Ende_IT">
        <di:waypoint x="730" y="495" />
        <di:waypoint x="790" y="495" />
      </bpmndi:BPMNEdge>

      <!-- Behoerde -->
      <bpmndi:BPMNEdge id="Flow_Behoerde_Start_Identitaet_di" bpmnElement="Flow_Behoerde_Start_Identitaet">
        <di:waypoint x="258" y="820" />
        <di:waypoint x="310" y="820" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Identitaet_Personalisieren_di" bpmnElement="Flow_Identitaet_Personalisieren">
        <di:waypoint x="410" y="820" />
        <di:waypoint x="470" y="820" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Personalisieren_Vorbereiten_di" bpmnElement="Flow_Personalisieren_Vorbereiten">
        <di:waypoint x="570" y="820" />
        <di:waypoint x="630" y="820" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Vorbereiten_Aushaendigen_di" bpmnElement="Flow_Vorbereiten_Aushaendigen">
        <di:waypoint x="730" y="820" />
        <di:waypoint x="790" y="820" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Aushaendigen_Ende_di" bpmnElement="Flow_Aushaendigen_Ende">
        <di:waypoint x="890" y="820" />
        <di:waypoint x="950" y="820" />
      </bpmndi:BPMNEdge>

      <!-- Message Flows DI -->
      <bpmndi:BPMNEdge id="MsgFlow_Antrag_Uebermittlung_di" bpmnElement="MsgFlow_Antrag_Uebermittlung">
        <di:waypoint x="360" y="240" />
        <di:waypoint x="360" y="477" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MsgFlow_Gebuehr_Bestaetigung_di" bpmnElement="MsgFlow_Gebuehr_Bestaetigung">
        <di:waypoint x="520" y="240" />
        <di:waypoint x="520" y="495" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MsgFlow_Vollstaendigkeit_OK_di" bpmnElement="MsgFlow_Vollstaendigkeit_OK">
        <di:waypoint x="520" y="495" />
        <di:waypoint x="520" y="782" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MsgFlow_Datensatz_di" bpmnElement="MsgFlow_Datensatz">
        <di:waypoint x="680" y="495" />
        <di:waypoint x="680" y="760" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MsgFlow_Abholinfo_di" bpmnElement="MsgFlow_Abholinfo">
        <di:waypoint x="680" y="760" />
        <di:waypoint x="680" y="160" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="MsgFlow_Aushaendigung_di" bpmnElement="MsgFlow_Aushaendigung">
        <di:waypoint x="840" y="760" />
        <di:waypoint x="840" y="200" />
      </bpmndi:BPMNEdge>

    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
