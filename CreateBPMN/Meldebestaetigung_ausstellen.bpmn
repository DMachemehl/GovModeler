<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions
  xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:camunda="http://camunda.org/schema/1.0/bpmn"
  targetNamespace="http://example.com/bpmn"
  exporter="GitHub-Copilot-GovModeler"
  exporterVersion="2.0"
  modeler:executionPlatform="Camunda Platform"
  modeler:executionPlatformVersion="7.20.0">

  <!-- =====================================================
       COLLABORATION - Meldebestaetigung ausstellen
       ===================================================== -->
  <bpmn:collaboration id="Collab_Meldebestaetigung_ausstellen">

    <!-- Participant: Buerger -->
    <bpmn:participant id="Participant_Buerger"
                      name="Buerger"
                      processRef="Process_Buerger" />

    <!-- Participant: IT -->
    <bpmn:participant id="Participant_IT"
                      name="IT"
                      processRef="Process_IT" />

    <!-- Participant: Behoerde -->
    <bpmn:participant id="Participant_Behoerde"
                      name="Behoerde"
                      processRef="Process_Behoerde" />

    <!-- Message Flows -->
    <!-- Buerger -> IT: Antrag -->
    <bpmn:messageFlow id="MsgFlow_Antrag_stellen"
                      name="Antrag"
                      sourceRef="Task_Buerger_Antrag_stellen"
                      targetRef="Task_IT_Antrag_entgegennehmen" />

    <!-- IT -> Behoerde: Meldedaten anfragen -->
    <bpmn:messageFlow id="MsgFlow_Meldedaten_anfragen"
                      name="Meldedaten anfragen"
                      sourceRef="Task_IT_Meldedaten_abrufen"
                      targetRef="Task_Behoerde_Meldedaten_bereitstellen" />

    <!-- Behoerde -> IT: Meldedaten bereitstellen -->
    <bpmn:messageFlow id="MsgFlow_Meldedaten_bereitstellen"
                      name="Meldedaten"
                      sourceRef="Task_Behoerde_Ausstellung_freigeben"
                      targetRef="Task_IT_Meldebestaetigung_erzeugen" />

    <!-- IT -> Buerger: Meldebestaetigung zustellen -->
    <bpmn:messageFlow id="MsgFlow_Meldebestaetigung_zustellen"
                      name="Meldebestaetigung"
                      sourceRef="Task_IT_Meldebestaetigung_erzeugen"
                      targetRef="Task_Buerger_Meldebestaetigung_empfangen" />

  </bpmn:collaboration>

  <!-- =====================================================
       BUERGER PROZESS
       ===================================================== -->
  <bpmn:process id="Process_Buerger"
                name="Meldebestaetigung_ausstellen_Buerger"
                isExecutable="true">

    <!-- Start Event -->
    <bpmn:startEvent id="StartEvent_Buerger" name="Antrag auf Meldebestaetigung eingegangen">
      <bpmn:outgoing>Flow_Buerger_Start_Antrag</bpmn:outgoing>
    </bpmn:startEvent>

    <!-- Task: Antrag stellen -->
    <bpmn:userTask id="Task_Buerger_Antrag_stellen" name="Antrag stellen">
      <bpmn:incoming>Flow_Buerger_Start_Antrag</bpmn:incoming>
      <bpmn:outgoing>Flow_Buerger_Antrag_Empfangen</bpmn:outgoing>
    </bpmn:userTask>

    <!-- Task: Meldebestaetigung empfangen -->
    <bpmn:userTask id="Task_Buerger_Meldebestaetigung_empfangen" name="Meldebestaetigung empfangen">
      <bpmn:incoming>Flow_Buerger_Antrag_Empfangen</bpmn:incoming>
      <bpmn:outgoing>Flow_Buerger_Empfangen_Ende</bpmn:outgoing>
    </bpmn:userTask>

    <!-- End Event -->
    <bpmn:endEvent id="EndEvent_Buerger" name="Meldebestaetigung ausgestellt">
      <bpmn:incoming>Flow_Buerger_Empfangen_Ende</bpmn:incoming>
    </bpmn:endEvent>

    <!-- Sequence Flows - Buerger -->
    <bpmn:sequenceFlow id="Flow_Buerger_Start_Antrag"
                       sourceRef="StartEvent_Buerger"
                       targetRef="Task_Buerger_Antrag_stellen" />

    <bpmn:sequenceFlow id="Flow_Buerger_Antrag_Empfangen"
                       sourceRef="Task_Buerger_Antrag_stellen"
                       targetRef="Task_Buerger_Meldebestaetigung_empfangen" />

    <bpmn:sequenceFlow id="Flow_Buerger_Empfangen_Ende"
                       sourceRef="Task_Buerger_Meldebestaetigung_empfangen"
                       targetRef="EndEvent_Buerger" />
  </bpmn:process>

  <!-- =====================================================
       IT PROZESS
       ===================================================== -->
  <bpmn:process id="Process_IT"
                name="Meldebestaetigung_ausstellen_IT"
                isExecutable="true">

    <!-- Start Event -->
    <bpmn:startEvent id="StartEvent_IT" name="Antrag erhalten">
      <bpmn:outgoing>Flow_IT_Start_Entgegennehmen</bpmn:outgoing>
    </bpmn:startEvent>

    <!-- Task 1: Antrag entgegennehmen -->
    <bpmn:serviceTask id="Task_IT_Antrag_entgegennehmen" name="Antrag entgegennehmen">
      <bpmn:incoming>Flow_IT_Start_Entgegennehmen</bpmn:incoming>
      <bpmn:outgoing>Flow_IT_Entgegennehmen_Authentifizieren</bpmn:outgoing>
    </bpmn:serviceTask>

    <!-- Task 2: Identitaet authentifizieren -->
    <bpmn:serviceTask id="Task_IT_Identitaet_authentifizieren" name="Identitaet authentifizieren">
      <bpmn:incoming>Flow_IT_Entgegennehmen_Authentifizieren</bpmn:incoming>
      <bpmn:outgoing>Flow_IT_Authentifizieren_Meldedaten</bpmn:outgoing>
    </bpmn:serviceTask>

    <!-- Task 3: Meldedaten abrufen -->
    <bpmn:serviceTask id="Task_IT_Meldedaten_abrufen" name="Meldedaten abrufen">
      <bpmn:incoming>Flow_IT_Authentifizieren_Meldedaten</bpmn:incoming>
      <bpmn:outgoing>Flow_IT_Meldedaten_Erzeugen</bpmn:outgoing>
    </bpmn:serviceTask>

    <!-- Task 4: Meldebestaetigung erzeugen und zustellen -->
    <bpmn:serviceTask id="Task_IT_Meldebestaetigung_erzeugen" name="Meldebestaetigung erzeugen und zustellen">
      <bpmn:incoming>Flow_IT_Meldedaten_Erzeugen</bpmn:incoming>
      <bpmn:outgoing>Flow_IT_Erzeugen_Ende</bpmn:outgoing>
    </bpmn:serviceTask>

    <!-- End Event -->
    <bpmn:endEvent id="EndEvent_IT" name="Bearbeitung abgeschlossen">
      <bpmn:incoming>Flow_IT_Erzeugen_Ende</bpmn:incoming>
    </bpmn:endEvent>

    <!-- Sequence Flows - IT -->
    <bpmn:sequenceFlow id="Flow_IT_Start_Entgegennehmen"
                       sourceRef="StartEvent_IT"
                       targetRef="Task_IT_Antrag_entgegennehmen" />

    <bpmn:sequenceFlow id="Flow_IT_Entgegennehmen_Authentifizieren"
                       sourceRef="Task_IT_Antrag_entgegennehmen"
                       targetRef="Task_IT_Identitaet_authentifizieren" />

    <bpmn:sequenceFlow id="Flow_IT_Authentifizieren_Meldedaten"
                       sourceRef="Task_IT_Identitaet_authentifizieren"
                       targetRef="Task_IT_Meldedaten_abrufen" />

    <bpmn:sequenceFlow id="Flow_IT_Meldedaten_Erzeugen"
                       sourceRef="Task_IT_Meldedaten_abrufen"
                       targetRef="Task_IT_Meldebestaetigung_erzeugen" />

    <bpmn:sequenceFlow id="Flow_IT_Erzeugen_Ende"
                       sourceRef="Task_IT_Meldebestaetigung_erzeugen"
                       targetRef="EndEvent_IT" />
  </bpmn:process>

  <!-- =====================================================
       BEHOERDE PROZESS
       ===================================================== -->
  <bpmn:process id="Process_Behoerde"
                name="Meldebestaetigung_ausstellen_Behoerde"
                isExecutable="true">

    <!-- Start Event -->
    <bpmn:startEvent id="StartEvent_Behoerde" name="Datenanfrage erhalten">
      <bpmn:outgoing>Flow_Behoerde_Start_Bereitstellen</bpmn:outgoing>
    </bpmn:startEvent>

    <!-- Task 1: Meldedaten bereitstellen -->
    <bpmn:serviceTask id="Task_Behoerde_Meldedaten_bereitstellen" name="Meldedaten bereitstellen">
      <bpmn:incoming>Flow_Behoerde_Start_Bereitstellen</bpmn:incoming>
      <bpmn:outgoing>Flow_Behoerde_Bereitstellen_Freigeben</bpmn:outgoing>
    </bpmn:serviceTask>

    <!-- Task 2: Ausstellung freigeben -->
    <bpmn:userTask id="Task_Behoerde_Ausstellung_freigeben" name="Ausstellung freigeben">
      <bpmn:incoming>Flow_Behoerde_Bereitstellen_Freigeben</bpmn:incoming>
      <bpmn:outgoing>Flow_Behoerde_Freigeben_Ende</bpmn:outgoing>
    </bpmn:userTask>

    <!-- End Event -->
    <bpmn:endEvent id="EndEvent_Behoerde" name="Freigabe erteilt">
      <bpmn:incoming>Flow_Behoerde_Freigeben_Ende</bpmn:incoming>
    </bpmn:endEvent>

    <!-- Sequence Flows - Behoerde -->
    <bpmn:sequenceFlow id="Flow_Behoerde_Start_Bereitstellen"
                       sourceRef="StartEvent_Behoerde"
                       targetRef="Task_Behoerde_Meldedaten_bereitstellen" />

    <bpmn:sequenceFlow id="Flow_Behoerde_Bereitstellen_Freigeben"
                       sourceRef="Task_Behoerde_Meldedaten_bereitstellen"
                       targetRef="Task_Behoerde_Ausstellung_freigeben" />

    <bpmn:sequenceFlow id="Flow_Behoerde_Freigeben_Ende"
                       sourceRef="Task_Behoerde_Ausstellung_freigeben"
                       targetRef="EndEvent_Behoerde" />
  </bpmn:process>

  <!-- =====================================================
       MESSAGE DEFINITIONEN
       ===================================================== -->
  <bpmn:message id="Message_Antrag" name="Antrag" />
  <bpmn:message id="Message_Meldedaten" name="Meldedaten" />
  <bpmn:message id="Message_Meldebestaetigung" name="Meldebestaetigung" />

  <!-- =====================================================
       BPMN-DI VISUALISIERUNG
       ===================================================== -->
  <bpmndi:BPMNDiagram id="BPMNDiagram_Meldebestaetigung_ausstellen">
    <bpmndi:BPMNPlane id="BPMNPlane_Meldebestaetigung_ausstellen" bpmnElement="Collab_Meldebestaetigung_ausstellen">

      <!-- ===============================
           POOL: BUERGER (oben)
           =============================== -->
      <bpmndi:BPMNShape id="Participant_Buerger_di" bpmnElement="Participant_Buerger" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="1200" height="250" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="170" y="190" width="20" height="50" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- Buerger Process Elements - Horizontal auf Y=160 -->
      <bpmndi:BPMNShape id="StartEvent_Buerger_di" bpmnElement="StartEvent_Buerger">
        <dc:Bounds x="222" y="182" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="200" y="225" width="80" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Task_Buerger_Antrag_stellen_di" bpmnElement="Task_Buerger_Antrag_stellen">
        <dc:Bounds x="310" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Task_Buerger_Meldebestaetigung_empfangen_di" bpmnElement="Task_Buerger_Meldebestaetigung_empfangen">
        <dc:Bounds x="470" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="EndEvent_Buerger_di" bpmnElement="EndEvent_Buerger">
        <dc:Bounds x="632" y="182" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="610" y="225" width="80" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- ===============================
           POOL: IT (mitte)
           =============================== -->
      <bpmndi:BPMNShape id="Participant_IT_di" bpmnElement="Participant_IT" isHorizontal="true">
        <dc:Bounds x="160" y="370" width="1200" height="250" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="170" y="480" width="20" height="30" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- IT Process Elements - Horizontal auf Y=455 -->
      <bpmndi:BPMNShape id="StartEvent_IT_di" bpmnElement="StartEvent_IT">
        <dc:Bounds x="222" y="477" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="200" y="520" width="80" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Task_IT_Antrag_entgegennehmen_di" bpmnElement="Task_IT_Antrag_entgegennehmen">
        <dc:Bounds x="310" y="455" width="100" height="80" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Task_IT_Identitaet_authentifizieren_di" bpmnElement="Task_IT_Identitaet_authentifizieren">
        <dc:Bounds x="470" y="455" width="100" height="80" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Task_IT_Meldedaten_abrufen_di" bpmnElement="Task_IT_Meldedaten_abrufen">
        <dc:Bounds x="630" y="455" width="100" height="80" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Task_IT_Meldebestaetigung_erzeugen_di" bpmnElement="Task_IT_Meldebestaetigung_erzeugen">
        <dc:Bounds x="790" y="455" width="100" height="80" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="EndEvent_IT_di" bpmnElement="EndEvent_IT">
        <dc:Bounds x="952" y="477" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="930" y="520" width="80" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- ===============================
           POOL: BEHOERDE (unten)
           =============================== -->
      <bpmndi:BPMNShape id="Participant_Behoerde_di" bpmnElement="Participant_Behoerde" isHorizontal="true">
        <dc:Bounds x="160" y="660" width="1200" height="250" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="170" y="770" width="20" height="60" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- Behoerde Process Elements - Horizontal auf Y=760 -->
      <bpmndi:BPMNShape id="StartEvent_Behoerde_di" bpmnElement="StartEvent_Behoerde">
        <dc:Bounds x="222" y="782" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="200" y="825" width="80" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Task_Behoerde_Meldedaten_bereitstellen_di" bpmnElement="Task_Behoerde_Meldedaten_bereitstellen">
        <dc:Bounds x="310" y="760" width="100" height="80" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="Task_Behoerde_Ausstellung_freigeben_di" bpmnElement="Task_Behoerde_Ausstellung_freigeben">
        <dc:Bounds x="470" y="760" width="100" height="80" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="EndEvent_Behoerde_di" bpmnElement="EndEvent_Behoerde">
        <dc:Bounds x="632" y="782" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="610" y="825" width="80" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- ===============================
           SEQUENCE FLOWS - BUERGER
           =============================== -->
      <bpmndi:BPMNEdge id="Flow_Buerger_Start_Antrag_di" bpmnElement="Flow_Buerger_Start_Antrag">
        <di:waypoint x="258" y="200" />
        <di:waypoint x="310" y="200" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_Buerger_Antrag_Empfangen_di" bpmnElement="Flow_Buerger_Antrag_Empfangen">
        <di:waypoint x="410" y="200" />
        <di:waypoint x="470" y="200" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_Buerger_Empfangen_Ende_di" bpmnElement="Flow_Buerger_Empfangen_Ende">
        <di:waypoint x="570" y="200" />
        <di:waypoint x="632" y="200" />
      </bpmndi:BPMNEdge>

      <!-- ===============================
           SEQUENCE FLOWS - IT
           =============================== -->
      <bpmndi:BPMNEdge id="Flow_IT_Start_Entgegennehmen_di" bpmnElement="Flow_IT_Start_Entgegennehmen">
        <di:waypoint x="258" y="495" />
        <di:waypoint x="310" y="495" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_IT_Entgegennehmen_Authentifizieren_di" bpmnElement="Flow_IT_Entgegennehmen_Authentifizieren">
        <di:waypoint x="410" y="495" />
        <di:waypoint x="470" y="495" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_IT_Authentifizieren_Meldedaten_di" bpmnElement="Flow_IT_Authentifizieren_Meldedaten">
        <di:waypoint x="570" y="495" />
        <di:waypoint x="630" y="495" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_IT_Meldedaten_Erzeugen_di" bpmnElement="Flow_IT_Meldedaten_Erzeugen">
        <di:waypoint x="730" y="495" />
        <di:waypoint x="790" y="495" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_IT_Erzeugen_Ende_di" bpmnElement="Flow_IT_Erzeugen_Ende">
        <di:waypoint x="890" y="495" />
        <di:waypoint x="952" y="495" />
      </bpmndi:BPMNEdge>

      <!-- ===============================
           SEQUENCE FLOWS - BEHOERDE
           =============================== -->
      <bpmndi:BPMNEdge id="Flow_Behoerde_Start_Bereitstellen_di" bpmnElement="Flow_Behoerde_Start_Bereitstellen">
        <di:waypoint x="258" y="800" />
        <di:waypoint x="310" y="800" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_Behoerde_Bereitstellen_Freigeben_di" bpmnElement="Flow_Behoerde_Bereitstellen_Freigeben">
        <di:waypoint x="410" y="800" />
        <di:waypoint x="470" y="800" />
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_Behoerde_Freigeben_Ende_di" bpmnElement="Flow_Behoerde_Freigeben_Ende">
        <di:waypoint x="570" y="800" />
        <di:waypoint x="632" y="800" />
      </bpmndi:BPMNEdge>

      <!-- ===============================
           MESSAGE FLOWS
           =============================== -->
      <!-- Buerger -> IT: Antrag stellen -->
      <bpmndi:BPMNEdge id="MsgFlow_Antrag_stellen_di" bpmnElement="MsgFlow_Antrag_stellen">
        <di:waypoint x="360" y="240" />
        <di:waypoint x="360" y="455" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="370" y="340" width="40" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- IT -> Behoerde: Meldedaten anfragen -->
      <bpmndi:BPMNEdge id="MsgFlow_Meldedaten_anfragen_di" bpmnElement="MsgFlow_Meldedaten_anfragen">
        <di:waypoint x="680" y="535" />
        <di:waypoint x="680" y="640" />
        <di:waypoint x="360" y="640" />
        <di:waypoint x="360" y="760" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="460" y="620" width="120" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- Behoerde -> IT: Meldedaten bereitstellen -->
      <bpmndi:BPMNEdge id="MsgFlow_Meldedaten_bereitstellen_di" bpmnElement="MsgFlow_Meldedaten_bereitstellen">
        <di:waypoint x="520" y="760" />
        <di:waypoint x="520" y="640" />
        <di:waypoint x="840" y="640" />
        <di:waypoint x="840" y="535" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="640" y="620" width="70" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <!-- IT -> Buerger: Meldebestaetigung zustellen -->
      <bpmndi:BPMNEdge id="MsgFlow_Meldebestaetigung_zustellen_di" bpmnElement="MsgFlow_Meldebestaetigung_zustellen">
        <di:waypoint x="840" y="455" />
        <di:waypoint x="840" y="340" />
        <di:waypoint x="520" y="340" />
        <di:waypoint x="520" y="240" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="630" y="320" width="100" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>

</bpmn:definitions>
