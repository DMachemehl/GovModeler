<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions
  xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:camunda="http://camunda.org/schema/1.0/bpmn"
  targetNamespace="http://example.com/bpmn"
  exporter="GitHub-Copilot-GovModeler"
  exporterVersion="2.0"
  modeler:executionPlatform="Camunda Platform"
  modeler:executionPlatformVersion="7.20.0">

  <!-- =====================================================
       COLLABORATION - IT-Datenverarbeitungsprozess
       ===================================================== -->
  <bpmn:collaboration id="Collab_Wohngeld_beantragen">
    
    <!-- Participant: IT -->
    <bpmn:participant id="Participant_IT"
                      name="IT"
                      processRef="Process_IT_Wohngeld" />
    
  </bpmn:collaboration>

  <!-- =====================================================
       IT-PROZESS - Wohngeld beantragen (detailliert)
       ===================================================== -->
  <bpmn:process id="Process_IT_Wohngeld"
                name="IT_Wohngeld_Datenverarbeitung"
                isExecutable="true">
    
    <!-- Start Event -->
    <bpmn:startEvent id="StartEvent_Antragsdaten_empfangen" name="Antragsdaten empfangen">
      <bpmn:outgoing>Flow_01</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDef_Antrag" />
    </bpmn:startEvent>
    
    <!-- Service Task 1: JSON-Struktur validieren -->
    <bpmn:serviceTask id="Task_JSON_Struktur_validieren" name="JSON-Struktur validieren">
      <bpmn:incoming>Flow_01</bpmn:incoming>
      <bpmn:outgoing>Flow_02</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 2: Pflichtfelder pruefen -->
    <bpmn:serviceTask id="Task_Pflichtfelder_pruefen" name="Pflichtfelder pruefen">
      <bpmn:incoming>Flow_02</bpmn:incoming>
      <bpmn:outgoing>Flow_03</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 3: Datenformate validieren -->
    <bpmn:serviceTask id="Task_Datenformate_validieren" name="Datenformate validieren">
      <bpmn:incoming>Flow_03</bpmn:incoming>
      <bpmn:outgoing>Flow_04</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 4: IBAN validieren -->
    <bpmn:serviceTask id="Task_IBAN_validieren" name="IBAN validieren">
      <bpmn:incoming>Flow_04</bpmn:incoming>
      <bpmn:outgoing>Flow_05</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 5: Stammdaten Antragsteller abrufen -->
    <bpmn:serviceTask id="Task_Stammdaten_Antragsteller_abrufen" name="Stammdaten Antragsteller abrufen">
      <bpmn:incoming>Flow_05</bpmn:incoming>
      <bpmn:outgoing>Flow_06</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 6: Mietstufe ermitteln -->
    <bpmn:serviceTask id="Task_Mietstufe_ermitteln" name="Mietstufe ermitteln">
      <bpmn:incoming>Flow_06</bpmn:incoming>
      <bpmn:outgoing>Flow_07</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 7: Haushaltsgroesse berechnen -->
    <bpmn:serviceTask id="Task_Haushaltsgroesse_berechnen" name="Haushaltsgroesse berechnen">
      <bpmn:incoming>Flow_07</bpmn:incoming>
      <bpmn:outgoing>Flow_08</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 8: Einkommensgrenzen abrufen -->
    <bpmn:serviceTask id="Task_Einkommensgrenzen_abrufen" name="Einkommensgrenzen abrufen">
      <bpmn:incoming>Flow_08</bpmn:incoming>
      <bpmn:outgoing>Flow_09</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 9: Einkommen gegen Grenzwerte pruefen -->
    <bpmn:serviceTask id="Task_Einkommen_gegen_Grenzwerte_pruefen" name="Einkommen gegen Grenzwerte pruefen">
      <bpmn:incoming>Flow_09</bpmn:incoming>
      <bpmn:outgoing>Flow_10</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 10: Wohngeldformel anwenden -->
    <bpmn:serviceTask id="Task_Wohngeldformel_anwenden" name="Wohngeldformel anwenden">
      <bpmn:incoming>Flow_10</bpmn:incoming>
      <bpmn:outgoing>Flow_11</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 11: Anspruchsbetrag berechnen -->
    <bpmn:serviceTask id="Task_Anspruchsbetrag_berechnen" name="Anspruchsbetrag berechnen">
      <bpmn:incoming>Flow_11</bpmn:incoming>
      <bpmn:outgoing>Flow_12</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 12: Bewilligungszeitraum festlegen -->
    <bpmn:serviceTask id="Task_Bewilligungszeitraum_festlegen" name="Bewilligungszeitraum festlegen">
      <bpmn:incoming>Flow_12</bpmn:incoming>
      <bpmn:outgoing>Flow_13</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 13: Antragsdaten speichern -->
    <bpmn:serviceTask id="Task_Antragsdaten_speichern" name="Antragsdaten speichern">
      <bpmn:incoming>Flow_13</bpmn:incoming>
      <bpmn:outgoing>Flow_14</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 14: Berechnungsergebnis speichern -->
    <bpmn:serviceTask id="Task_Berechnungsergebnis_speichern" name="Berechnungsergebnis speichern">
      <bpmn:incoming>Flow_14</bpmn:incoming>
      <bpmn:outgoing>Flow_15</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 15: Vorgangsnummer generieren -->
    <bpmn:serviceTask id="Task_Vorgangsnummer_generieren" name="Vorgangsnummer generieren">
      <bpmn:incoming>Flow_15</bpmn:incoming>
      <bpmn:outgoing>Flow_16</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 16: E-Mail-Vorlage generieren -->
    <bpmn:serviceTask id="Task_E-Mail-Vorlage_generieren" name="E-Mail-Vorlage generieren">
      <bpmn:incoming>Flow_16</bpmn:incoming>
      <bpmn:outgoing>Flow_17</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- Service Task 17: Eingangsbestaetigung versenden -->
    <bpmn:sendTask id="Task_Eingangsbestaetigung_versenden" name="Eingangsbestaetigung versenden">
      <bpmn:incoming>Flow_17</bpmn:incoming>
      <bpmn:outgoing>Flow_18</bpmn:outgoing>
    </bpmn:sendTask>
    
    <!-- Service Task 18: Workflow-Status aktualisieren -->
    <bpmn:serviceTask id="Task_Workflow-Status_aktualisieren" name="Workflow-Status aktualisieren">
      <bpmn:incoming>Flow_18</bpmn:incoming>
      <bpmn:outgoing>Flow_19</bpmn:outgoing>
    </bpmn:serviceTask>
    
    <!-- End Event -->
    <bpmn:endEvent id="EndEvent_Antrag_verarbeitet" name="Antrag verarbeitet">
      <bpmn:incoming>Flow_19</bpmn:incoming>
    </bpmn:endEvent>
    
    <!-- Sequence Flows - IT-Prozess -->
    <bpmn:sequenceFlow id="Flow_01" sourceRef="StartEvent_Antragsdaten_empfangen" targetRef="Task_JSON_Struktur_validieren" />
    <bpmn:sequenceFlow id="Flow_02" sourceRef="Task_JSON_Struktur_validieren" targetRef="Task_Pflichtfelder_pruefen" />
    <bpmn:sequenceFlow id="Flow_03" sourceRef="Task_Pflichtfelder_pruefen" targetRef="Task_Datenformate_validieren" />
    <bpmn:sequenceFlow id="Flow_04" sourceRef="Task_Datenformate_validieren" targetRef="Task_IBAN_validieren" />
    <bpmn:sequenceFlow id="Flow_05" sourceRef="Task_IBAN_validieren" targetRef="Task_Stammdaten_Antragsteller_abrufen" />
    <bpmn:sequenceFlow id="Flow_06" sourceRef="Task_Stammdaten_Antragsteller_abrufen" targetRef="Task_Mietstufe_ermitteln" />
    <bpmn:sequenceFlow id="Flow_07" sourceRef="Task_Mietstufe_ermitteln" targetRef="Task_Haushaltsgroesse_berechnen" />
    <bpmn:sequenceFlow id="Flow_08" sourceRef="Task_Haushaltsgroesse_berechnen" targetRef="Task_Einkommensgrenzen_abrufen" />
    <bpmn:sequenceFlow id="Flow_09" sourceRef="Task_Einkommensgrenzen_abrufen" targetRef="Task_Einkommen_gegen_Grenzwerte_pruefen" />
    <bpmn:sequenceFlow id="Flow_10" sourceRef="Task_Einkommen_gegen_Grenzwerte_pruefen" targetRef="Task_Wohngeldformel_anwenden" />
    <bpmn:sequenceFlow id="Flow_11" sourceRef="Task_Wohngeldformel_anwenden" targetRef="Task_Anspruchsbetrag_berechnen" />
    <bpmn:sequenceFlow id="Flow_12" sourceRef="Task_Anspruchsbetrag_berechnen" targetRef="Task_Bewilligungszeitraum_festlegen" />
    <bpmn:sequenceFlow id="Flow_13" sourceRef="Task_Bewilligungszeitraum_festlegen" targetRef="Task_Antragsdaten_speichern" />
    <bpmn:sequenceFlow id="Flow_14" sourceRef="Task_Antragsdaten_speichern" targetRef="Task_Berechnungsergebnis_speichern" />
    <bpmn:sequenceFlow id="Flow_15" sourceRef="Task_Berechnungsergebnis_speichern" targetRef="Task_Vorgangsnummer_generieren" />
    <bpmn:sequenceFlow id="Flow_16" sourceRef="Task_Vorgangsnummer_generieren" targetRef="Task_E-Mail-Vorlage_generieren" />
    <bpmn:sequenceFlow id="Flow_17" sourceRef="Task_E-Mail-Vorlage_generieren" targetRef="Task_Eingangsbestaetigung_versenden" />
    <bpmn:sequenceFlow id="Flow_18" sourceRef="Task_Eingangsbestaetigung_versenden" targetRef="Task_Workflow-Status_aktualisieren" />
    <bpmn:sequenceFlow id="Flow_19" sourceRef="Task_Workflow-Status_aktualisieren" targetRef="EndEvent_Antrag_verarbeitet" />
  </bpmn:process>

  <!-- =====================================================
       BPMN-DI VISUALISIERUNG
       ===================================================== -->
  <bpmndi:BPMNDiagram id="BPMNDiagram_Wohngeld_beantragen">
    <bpmndi:BPMNPlane id="BPMNPlane_Wohngeld_beantragen" bpmnElement="Collab_Wohngeld_beantragen">
      
      <!-- ===============================
           POOL: IT (Dynamische Breite: 220 + 18 Tasks Ã— 160 = 3100px)
           =============================== -->
      <bpmndi:BPMNShape id="Participant_IT_di" bpmnElement="Participant_IT" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="3100" height="250" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="170" y="190" width="20" height="80" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      
      <!-- IT Process Elements - Horizontale Anordnung auf Y=160 -->
      <bpmndi:BPMNShape id="StartEvent_Antragsdaten_empfangen_di" bpmnElement="StartEvent_Antragsdaten_empfangen">
        <dc:Bounds x="222" y="182" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="202" y="225" width="76" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_JSON_Struktur_validieren_di" bpmnElement="Task_JSON_Struktur_validieren">
        <dc:Bounds x="310" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Pflichtfelder_pruefen_di" bpmnElement="Task_Pflichtfelder_pruefen">
        <dc:Bounds x="470" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Datenformate_validieren_di" bpmnElement="Task_Datenformate_validieren">
        <dc:Bounds x="630" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_IBAN_validieren_di" bpmnElement="Task_IBAN_validieren">
        <dc:Bounds x="790" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Stammdaten_Antragsteller_abrufen_di" bpmnElement="Task_Stammdaten_Antragsteller_abrufen">
        <dc:Bounds x="950" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Mietstufe_ermitteln_di" bpmnElement="Task_Mietstufe_ermitteln">
        <dc:Bounds x="1110" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Haushaltsgroesse_berechnen_di" bpmnElement="Task_Haushaltsgroesse_berechnen">
        <dc:Bounds x="1270" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Einkommensgrenzen_abrufen_di" bpmnElement="Task_Einkommensgrenzen_abrufen">
        <dc:Bounds x="1430" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Einkommen_gegen_Grenzwerte_pruefen_di" bpmnElement="Task_Einkommen_gegen_Grenzwerte_pruefen">
        <dc:Bounds x="1590" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Wohngeldformel_anwenden_di" bpmnElement="Task_Wohngeldformel_anwenden">
        <dc:Bounds x="1750" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Anspruchsbetrag_berechnen_di" bpmnElement="Task_Anspruchsbetrag_berechnen">
        <dc:Bounds x="1910" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Bewilligungszeitraum_festlegen_di" bpmnElement="Task_Bewilligungszeitraum_festlegen">
        <dc:Bounds x="2070" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Antragsdaten_speichern_di" bpmnElement="Task_Antragsdaten_speichern">
        <dc:Bounds x="2230" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Berechnungsergebnis_speichern_di" bpmnElement="Task_Berechnungsergebnis_speichern">
        <dc:Bounds x="2390" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Vorgangsnummer_generieren_di" bpmnElement="Task_Vorgangsnummer_generieren">
        <dc:Bounds x="2550" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_E-Mail-Vorlage_generieren_di" bpmnElement="Task_E-Mail-Vorlage_generieren">
        <dc:Bounds x="2710" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Eingangsbestaetigung_versenden_di" bpmnElement="Task_Eingangsbestaetigung_versenden">
        <dc:Bounds x="2870" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="Task_Workflow-Status_aktualisieren_di" bpmnElement="Task_Workflow-Status_aktualisieren">
        <dc:Bounds x="3030" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <bpmndi:BPMNShape id="EndEvent_Antrag_verarbeitet_di" bpmnElement="EndEvent_Antrag_verarbeitet">
        <dc:Bounds x="3182" y="182" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3160" y="225" width="80" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      
      <!-- ===============================
           SEQUENCE FLOWS - IT
           =============================== -->
      <bpmndi:BPMNEdge id="Flow_01_di" bpmnElement="Flow_01">
        <di:waypoint x="258" y="200" />
        <di:waypoint x="310" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_02_di" bpmnElement="Flow_02">
        <di:waypoint x="410" y="200" />
        <di:waypoint x="470" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_03_di" bpmnElement="Flow_03">
        <di:waypoint x="570" y="200" />
        <di:waypoint x="630" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_04_di" bpmnElement="Flow_04">
        <di:waypoint x="730" y="200" />
        <di:waypoint x="790" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_05_di" bpmnElement="Flow_05">
        <di:waypoint x="890" y="200" />
        <di:waypoint x="950" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_06_di" bpmnElement="Flow_06">
        <di:waypoint x="1050" y="200" />
        <di:waypoint x="1110" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_07_di" bpmnElement="Flow_07">
        <di:waypoint x="1210" y="200" />
        <di:waypoint x="1270" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_08_di" bpmnElement="Flow_08">
        <di:waypoint x="1370" y="200" />
        <di:waypoint x="1430" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_09_di" bpmnElement="Flow_09">
        <di:waypoint x="1530" y="200" />
        <di:waypoint x="1590" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_10_di" bpmnElement="Flow_10">
        <di:waypoint x="1690" y="200" />
        <di:waypoint x="1750" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_11_di" bpmnElement="Flow_11">
        <di:waypoint x="1850" y="200" />
        <di:waypoint x="1910" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_12_di" bpmnElement="Flow_12">
        <di:waypoint x="2010" y="200" />
        <di:waypoint x="2070" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_13_di" bpmnElement="Flow_13">
        <di:waypoint x="2170" y="200" />
        <di:waypoint x="2230" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_14_di" bpmnElement="Flow_14">
        <di:waypoint x="2330" y="200" />
        <di:waypoint x="2390" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_15_di" bpmnElement="Flow_15">
        <di:waypoint x="2490" y="200" />
        <di:waypoint x="2550" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_16_di" bpmnElement="Flow_16">
        <di:waypoint x="2650" y="200" />
        <di:waypoint x="2710" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_17_di" bpmnElement="Flow_17">
        <di:waypoint x="2810" y="200" />
        <di:waypoint x="2870" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_18_di" bpmnElement="Flow_18">
        <di:waypoint x="2970" y="200" />
        <di:waypoint x="3030" y="200" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="Flow_19_di" bpmnElement="Flow_19">
        <di:waypoint x="3130" y="200" />
        <di:waypoint x="3182" y="200" />
      </bpmndi:BPMNEdge>
      
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>

</bpmn:definitions>
