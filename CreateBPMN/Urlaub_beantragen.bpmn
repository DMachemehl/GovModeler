<?xml version="1.0" encoding="UTF-8"?>
<definitions 
    xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:camunda="http://camunda.org/schema/1.0/bpmn" 
    xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" 
    xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" 
    xmlns:di="http://www.omg.org/spec/DD/20100524/DI" 
    targetNamespace="" 
    exporter="d.velop process modeler" 
    exporterVersion="1.0.0">

  <!-- ============================================================================
       COLLABORATION - Urlaub beantragen
       ============================================================================ -->
  <collaboration id="collaboration_urlaub_beantragen">
    <participant id="participant_mitarbeiter" name="Mitarbeiter" processRef="process_mitarbeiter" />
    <participant id="participant_vorgesetzter" name="Vorgesetzter" processRef="process_vorgesetzter" />
    
    <!-- Nachrichtenflüsse zwischen den Pools -->
    <messageFlow id="message_flow_antrag" name="Urlaubsantrag" sourceRef="task_antrag_einreichen" targetRef="start_vorgesetzter" />
    <messageFlow id="message_flow_genehmigung" name="Genehmigung" sourceRef="task_mitarbeiter_informieren" targetRef="task_entscheidung_erhalten" />
  </collaboration>

  <!-- ============================================================================
       PROZESS 1: Mitarbeiter
       ============================================================================ -->
  <process id="process_mitarbeiter" name="Mitarbeiter - Urlaub beantragen" isExecutable="true">
    
    <extensionElements>
      <camunda:properties>
        <camunda:property name="variable:urlaubsbeginn*" value="Date!" />
        <camunda:property name="variable:urlaubsende*" value="Date!" />
        <camunda:property name="variable:anzahl_tage*" value="Number!" />
        <camunda:property name="variable:vertretung" value="Identity" />
        <camunda:property name="variable:bemerkung" value="String" />
      </camunda:properties>
    </extensionElements>

    <!-- Start Event -->
    <startEvent id="start_mitarbeiter" name="Urlaubswunsch entstanden" />

    <!-- User Tasks -->
    <userTask id="task_antrag_ausfuellen" 
              name="Urlaubsantrag ausfüllen" 
              camunda:formKey="c4a7e2b1-9f3d-4c8e-a5b6-1d2e3f4a5b6c"
              camunda:candidateUsers="${variables.get('dv_initiator')}" 
              camunda:priority="50" />

    <userTask id="task_antrag_einreichen" 
              name="Urlaubsantrag einreichen" 
              camunda:candidateUsers="${variables.get('dv_initiator')}" 
              camunda:priority="50" />

    <userTask id="task_entscheidung_erhalten" 
              name="Entscheidung erhalten" 
              camunda:candidateUsers="${variables.get('dv_initiator')}" 
              camunda:priority="50" />

    <!-- End Event -->
    <endEvent id="end_mitarbeiter" name="Urlaub genehmigt" />

    <!-- Sequence Flows -->
    <sequenceFlow id="flow_m1" sourceRef="start_mitarbeiter" targetRef="task_antrag_ausfuellen" />
    <sequenceFlow id="flow_m2" sourceRef="task_antrag_ausfuellen" targetRef="task_antrag_einreichen" />
    <sequenceFlow id="flow_m3" sourceRef="task_antrag_einreichen" targetRef="task_entscheidung_erhalten" />
    <sequenceFlow id="flow_m4" sourceRef="task_entscheidung_erhalten" targetRef="end_mitarbeiter" />

  </process>

  <!-- ============================================================================
       PROZESS 2: Vorgesetzter
       ============================================================================ -->
  <process id="process_vorgesetzter" name="Vorgesetzter - Urlaubsantrag bearbeiten" isExecutable="false">
    
    <!-- Message Start Event -->
    <startEvent id="start_vorgesetzter" name="Urlaubsantrag eingegangen">
      <messageEventDefinition id="message_def_antrag" />
    </startEvent>

    <!-- User Tasks -->
    <userTask id="task_antrag_pruefen" 
              name="Urlaubsantrag prüfen" 
              camunda:candidateUsers="${variables.get('dv_initiator')}" 
              camunda:priority="50" />

    <userTask id="task_antrag_genehmigen" 
              name="Urlaubsantrag genehmigen" 
              camunda:candidateUsers="${variables.get('dv_initiator')}" 
              camunda:priority="50" />

    <userTask id="task_mitarbeiter_informieren" 
              name="Mitarbeiter informieren" 
              camunda:candidateUsers="${variables.get('dv_initiator')}" 
              camunda:priority="50" />

    <!-- End Event -->
    <endEvent id="end_vorgesetzter" name="Antrag bearbeitet" />

    <!-- Sequence Flows -->
    <sequenceFlow id="flow_v1" sourceRef="start_vorgesetzter" targetRef="task_antrag_pruefen" />
    <sequenceFlow id="flow_v2" sourceRef="task_antrag_pruefen" targetRef="task_antrag_genehmigen" />
    <sequenceFlow id="flow_v3" sourceRef="task_antrag_genehmigen" targetRef="task_mitarbeiter_informieren" />
    <sequenceFlow id="flow_v4" sourceRef="task_mitarbeiter_informieren" targetRef="end_vorgesetzter" />

  </process>

  <!-- ============================================================================
       DIAGRAM INFORMATIONEN (BPMN-DI)
       ============================================================================ -->
  <bpmndi:BPMNDiagram id="BPMNDiagram_urlaub">
    <bpmndi:BPMNPlane id="BPMNPlane_collaboration" bpmnElement="collaboration_urlaub_beantragen">
      
      <!-- ===== POOL: Mitarbeiter ===== -->
      <bpmndi:BPMNShape id="participant_mitarbeiter_di" bpmnElement="participant_mitarbeiter" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="700" height="160" />
      </bpmndi:BPMNShape>
      
      <!-- Start Event Mitarbeiter -->
      <bpmndi:BPMNShape id="start_mitarbeiter_di" bpmnElement="start_mitarbeiter">
        <dc:Bounds x="212" y="142" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="186" y="185" width="88" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      
      <!-- Task: Urlaubsantrag ausfüllen -->
      <bpmndi:BPMNShape id="task_antrag_ausfuellen_di" bpmnElement="task_antrag_ausfuellen">
        <dc:Bounds x="300" y="120" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <!-- Task: Urlaubsantrag einreichen -->
      <bpmndi:BPMNShape id="task_antrag_einreichen_di" bpmnElement="task_antrag_einreichen">
        <dc:Bounds x="450" y="120" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <!-- Task: Entscheidung erhalten -->
      <bpmndi:BPMNShape id="task_entscheidung_erhalten_di" bpmnElement="task_entscheidung_erhalten">
        <dc:Bounds x="600" y="120" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <!-- End Event Mitarbeiter -->
      <bpmndi:BPMNShape id="end_mitarbeiter_di" bpmnElement="end_mitarbeiter">
        <dc:Bounds x="752" y="142" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="728" y="185" width="84" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      
      <!-- ===== POOL: Vorgesetzter ===== -->
      <bpmndi:BPMNShape id="participant_vorgesetzter_di" bpmnElement="participant_vorgesetzter" isHorizontal="true">
        <dc:Bounds x="160" y="300" width="700" height="160" />
      </bpmndi:BPMNShape>
      
      <!-- Start Event Vorgesetzter (Message) -->
      <bpmndi:BPMNShape id="start_vorgesetzter_di" bpmnElement="start_vorgesetzter">
        <dc:Bounds x="482" y="362" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="456" y="405" width="88" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      
      <!-- Task: Urlaubsantrag prüfen -->
      <bpmndi:BPMNShape id="task_antrag_pruefen_di" bpmnElement="task_antrag_pruefen">
        <dc:Bounds x="300" y="340" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <!-- Task: Urlaubsantrag genehmigen -->
      <bpmndi:BPMNShape id="task_antrag_genehmigen_di" bpmnElement="task_antrag_genehmigen">
        <dc:Bounds x="450" y="340" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <!-- Task: Mitarbeiter informieren -->
      <bpmndi:BPMNShape id="task_mitarbeiter_informieren_di" bpmnElement="task_mitarbeiter_informieren">
        <dc:Bounds x="600" y="340" width="100" height="80" />
      </bpmndi:BPMNShape>
      
      <!-- End Event Vorgesetzter -->
      <bpmndi:BPMNShape id="end_vorgesetzter_di" bpmnElement="end_vorgesetzter">
        <dc:Bounds x="752" y="362" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="728" y="405" width="84" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      
      <!-- ===== SEQUENCE FLOWS: Mitarbeiter ===== -->
      <bpmndi:BPMNEdge id="flow_m1_di" bpmnElement="flow_m1">
        <di:waypoint x="248" y="160" />
        <di:waypoint x="300" y="160" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="flow_m2_di" bpmnElement="flow_m2">
        <di:waypoint x="400" y="160" />
        <di:waypoint x="450" y="160" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="flow_m3_di" bpmnElement="flow_m3">
        <di:waypoint x="550" y="160" />
        <di:waypoint x="600" y="160" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="flow_m4_di" bpmnElement="flow_m4">
        <di:waypoint x="700" y="160" />
        <di:waypoint x="752" y="160" />
      </bpmndi:BPMNEdge>
      
      <!-- ===== SEQUENCE FLOWS: Vorgesetzter ===== -->
      <bpmndi:BPMNEdge id="flow_v1_di" bpmnElement="flow_v1">
        <di:waypoint x="518" y="380" />
        <di:waypoint x="550" y="380" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="flow_v2_di" bpmnElement="flow_v2">
        <di:waypoint x="400" y="380" />
        <di:waypoint x="450" y="380" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="flow_v3_di" bpmnElement="flow_v3">
        <di:waypoint x="550" y="380" />
        <di:waypoint x="600" y="380" />
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="flow_v4_di" bpmnElement="flow_v4">
        <di:waypoint x="700" y="380" />
        <di:waypoint x="752" y="380" />
      </bpmndi:BPMNEdge>
      
      <!-- ===== MESSAGE FLOWS ===== -->
      <bpmndi:BPMNEdge id="message_flow_antrag_di" bpmnElement="message_flow_antrag">
        <di:waypoint x="500" y="200" />
        <di:waypoint x="500" y="362" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="505" y="270" width="70" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      
      <bpmndi:BPMNEdge id="message_flow_genehmigung_di" bpmnElement="message_flow_genehmigung">
        <di:waypoint x="650" y="340" />
        <di:waypoint x="650" y="200" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="655" y="270" width="65" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
